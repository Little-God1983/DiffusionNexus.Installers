<Window xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:DiffusionNexus.Installers.ViewModels"
  x:Class="DiffusionNexus.Installers.Views.MainWindow"
        Title="Git Repositories Manager"
        x:DataType="vm:MainWindowViewModel"
     Width="1000"
        Height="700">
    
    <DockPanel>
                <Menu DockPanel.Dock="Top">
        <!-- Title -->
            <MenuItem Header="_File">
                <MenuItem Header="_New" Command="{Binding NewConfigurationCommand}" />
                <MenuItem Header="_Open" Command="{Binding OpenCommand}" />
                <MenuItem Header="_Save" Command="{Binding SaveCommand}" />
                <MenuItem Header="Save _As" Command="{Binding SaveAsCommand}" />
            </MenuItem>
        </Menu>
          <Border Padding="12"
                            BorderThickness="1"
                            CornerRadius="6"
                            BorderBrush="{DynamicResource ThemeBorderMidBrush}">
                        <StackPanel Spacing="12">
                            <TextBlock Text="Python Environment"
                                       FontSize="16"
                                       FontWeight="SemiBold" />
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="8" RowSpacing="8">
                                <TextBlock Text="Python Version" VerticalAlignment="Center" />
                                <ComboBox Grid.Column="1"
                                          ItemsSource="{Binding PythonVersions}"
                                          SelectedItem="{Binding SelectedPythonVersion}" />
                                <TextBlock Grid.Row="1" Text="Interpreter Override" VerticalAlignment="Center" />
                                <TextBox Grid.Row="1"
                                         Grid.Column="1"
                                         Text="{Binding InterpreterPathOverride, UpdateSourceTrigger=PropertyChanged}" />
                                <Button Grid.Row="1" Grid.Column="2" Content="Browse"
                                        Command="{Binding BrowseInterpreterCommand}" />
                                <CheckBox Grid.Row="2"
                                          Content="Create virtual environment"
                                          IsChecked="{Binding CreateVirtualEnvironment}" />
                                <TextBox Grid.Row="2"
                                         Grid.Column="1"
                                         Watermark="venv name"
                                         IsEnabled="{Binding CreateVirtualEnvironment}"
                                         Text="{Binding VirtualEnvironmentName, UpdateSourceTrigger=PropertyChanged}" />
                            </Grid>
                        </StackPanel>
                    </Border>
        <!-- Title -->
      <TextBlock DockPanel.Dock="Top" 
           Text="Git Repositories" 
FontSize="24" 
          FontWeight="Bold"
  Margin="20"
 HorizontalAlignment="Center"/>
 
        <!-- Add button -->
        <Button DockPanel.Dock="Top"
      Content="➕ Add Repository"
    Command="{Binding AddRepositoryCommand}"
   HorizontalAlignment="Center"
       Margin="10"
           Padding="30,12"
           FontSize="16"
       FontWeight="Bold"/>
   
        <!-- Item count -->
<TextBlock DockPanel.Dock="Top"
              Text="{Binding GitRepositories.Count, StringFormat='Total Repositories: {0}'}"
   HorizontalAlignment="Center"
    FontSize="16"
             FontWeight="Bold"
                 Foreground="Green"
       Margin="10"/>
   
        <!-- ListBox with repositories -->
        <Border BorderBrush="DarkGray" 
             BorderThickness="2" 
                Margin="20"
        CornerRadius="8">
          <ListBox ItemsSource="{Binding GitRepositories}"
SelectedItem="{Binding SelectedRepository}"
     Background="White"
     ScrollViewer.HorizontalScrollBarVisibility="Disabled">
     <ListBox.ItemTemplate>
     <DataTemplate>
     <Border BorderBrush="Gray" 
               BorderThickness="1" 
              Padding="15" 
        Margin="8"
           Background="WhiteSmoke"
  CornerRadius="6">
      <Grid ColumnDefinitions="Auto,*,Auto">
         <!-- Priority Badge -->
  <Border Grid.Column="0"
               Background="DarkBlue"
      CornerRadius="20"
         Width="40"
       Height="40"
        Margin="0,0,15,0"
     VerticalAlignment="Top">
     <TextBlock Text="{Binding Priority}" 
        Foreground="White"
            FontSize="18"
            FontWeight="Bold"
          HorizontalAlignment="Center"
       VerticalAlignment="Center"/>
     </Border>
          
               <!-- Repository Info -->
      <StackPanel Grid.Column="1">
         <TextBlock Text="{Binding Name}" 
          FontSize="18"
            FontWeight="Bold"
         Foreground="DarkBlue"
         TextWrapping="Wrap"/>
             <TextBlock Text="{Binding Url}" 
     FontSize="14"
                Foreground="Blue"
       Margin="0,5,0,0"
    TextWrapping="Wrap"/>
  <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
            <TextBlock Text="Install Requirements: " 
        FontSize="12"
   Foreground="Gray"/>
   <TextBlock Text="{Binding InstallRequirements}" 
           FontSize="12"
     FontWeight="Bold"
             Foreground="DarkGreen"/>
         </StackPanel>
      </StackPanel>
 
                   <!-- Action Buttons -->
        <StackPanel Grid.Column="2" 
  Spacing="8"
    Margin="15,0,0,0">
        <!-- Move Up -->
       <Button Content="▲ Up"
          Click="OnMoveUpClick"
   Tag="{Binding}"
        Width="100"
           Padding="8,6"
     FontSize="14"
       HorizontalContentAlignment="Center"
        Background="#E3F2FD"/>
     
                <!-- Move Down -->
            <Button Content="▼ Down"
 Click="OnMoveDownClick"
         Tag="{Binding}"
      Width="100"
     Padding="8,6"
     FontSize="14"
      HorizontalContentAlignment="Center"
          Background="#E3F2FD"/>
     
       <!-- Edit -->
     <Button Content="✏️ Edit"
         Command="{Binding $parent[ListBox].((vm:MainWindowViewModel)DataContext).EditRepositoryCommand}"
           CommandParameter="{Binding}"
             Width="100"
         Padding="8,6"
     FontSize="14"
             HorizontalContentAlignment="Center"
                  Background="LightBlue"/>
           
           <!-- Delete -->
   <Button Content="🗑️ Delete"
              Command="{Binding $parent[ListBox].((vm:MainWindowViewModel)DataContext).DeleteRepositoryCommand}"
            CommandParameter="{Binding}"
    Width="100"
     Padding="8,6"
  FontSize="14"
       HorizontalContentAlignment="Center"
   Background="LightCoral"/>
           </StackPanel>
    </Grid>
              </Border>
            </DataTemplate>
     </ListBox.ItemTemplate>
            </ListBox>
     </Border>
    </DockPanel>
</Window>
